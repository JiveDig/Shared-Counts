"use strict";jQuery(document).ready(function(d){var l,h,a=!1;function u(){a=!1,d("#shared-counts-modal-recipient, #shared-counts-modal-name, #shared-counts-modal-email").val(""),d("#shared-counts-modal-wrap").fadeOut(),d("#shared-counts-modal-sent").hide()}d(document).on("click",'.shared-counts-button[target="_blank"]:not(.no-js)',function(e){e.preventDefault();var a="",t=this.href;switch(t.split("/")[2]){case"www.facebook.com":a="width=585,height=368";break;case"twitter.com":a="width=585,height=261";break;case"plus.google.com":a="width=517,height=511";break;case"pinterest.com":a="width=750,height=550";break;default:a="width=585,height=515"}window.open(t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+a),d(this).trigger("shared-counts-click")}),d(document).on("click",'a[href*="#shared-counts-email"]',function(e){e.preventDefault(),a=!0,d("#shared-counts-modal-wrap").fadeIn(),d("#shared-counts-modal-recipient").focus(),l=d(this).data("postid"),h=d(this).data("nonce"),shared_counts.recaptchaSitekey&&grecaptcha.render("shared-counts-modal-recaptcha",{sitekey:shared_counts.recaptchaSitekey})}),d(document).on("click","#shared-counts-modal-close, #shared-counts-modal-wrap",function(e){("shared-counts-modal-wrap"!==d(this).attr("id")||d(e.target).is("#shared-counts-modal-wrap"))&&(e.preventDefault(),u())}),d(document).keyup(function(e){a&&27===e.keyCode&&u()}),d(document).on("click","#shared-counts-modal-submit",function(e){e.preventDefault();var a=!1,t=d(this),o=d("#shared-counts-modal-recipient"),s=d("#shared-counts-modal-name"),n=d("#shared-counts-modal-email"),c=d("#shared-counts-modal-validation"),r=d("#g-recaptcha-response"),i={action:"shared_counts_email",postid:l,recipient:o.val(),name:s.val(),email:n.val(),validation:c.val(),recaptcha:r.val(),nonce:h};d(o,s,n).each(function(){d(this).val()&&""!==d(this).val()||(a=!0)}),a?alert(shared_counts.email_fields_required):(d(this).prop("disabled",!0),d.post(shared_counts.ajaxurl,i,function(e){e.success&&(console.log(shared_counts.email_sent),u()),t.prop("disabled",!1)}).fail(function(e){console.log(e.responseText)}))})});